---
// Assets
import Logo from "@/components/assets/Logo.astro";
// Fundations
import Text from "@/components/fundations/elements/Text.astro";
import Button from "../fundations/elements/Button.astro";
import Wrapper from "@/components/fundations/containers/Wrapper.astro";
// Icons
import ArrowRight from "../fundations/icons/ArrowRight.astro";
// Get all posts
import { getCollection } from "astro:content";
const allPosts = await getCollection("posts");
allPosts.sort((a, b) => {
  const dateA = new Date(a.data.pubDate).getTime(); // Convert to timestamp
  const dateB = new Date(b.data.pubDate).getTime(); // Convert to timestamp
  return dateB - dateA; // Compare timestamps
});
// Tags
const tags = [...new Set(allPosts.map((post) => post.data.tags).flat())];
// Array
const sections = [
  {
    title: "Making the Metaverse",
    links: [
      { name: "Overview", url: "/system/overview" },
      { name: "Colors", url: "/system/colors" },
      { name: "Links", url: "/system/links" },
      { name: "Buttons", url: "/system/buttons" },
      { name: "Typography", url: "/system/typography" },
    ],
  },
  {
    title: "Categories",
    links: [
      ...tags.map((tag) => ({
        name: tag.replace(/-/g, " "), // Format the tag by replacing hyphens with spaces
        url: `/blog/tags/${tag}`,
      })),
    ],
  },
  {
    title: "Company",
    links: [
      { name: "Twitter", url: "#_" },
      { name: "Linkedin", url: "#_" },
      { name: "Youtube", url: "#_" },
      { name: "Facebook", url: "#_" },
      { name: "Instagram", url: "#_" },
    ],
  },
];
---

<footer>
  <Wrapper variant="standard" class="py-2">
    <div class="grid grid-cols-1 lg:grid-cols-6 lg:row-span-2 gap-2">
      <div
        class="items-end p-2 bg-base-900 rounded-4xl lg:col-span-2 lg:row-span-2"
      >
        <div class="flex flex-col px-4 pt-4 gap-2">
          <Text tag="h3" variant="textSM" class="font-mono text-white sm:w-1/3">
            Subscribe to Making the Metaverse
          </Text>
          <Text tag="p" variant="textSM" class="pl-8 text-white sm:w-1/2">
            You can unsubscribe at any time. Our Privacy Policy is available
            here.
          </Text>
        </div>
        <form class="flex items-end w-full mt-12 lg:mt-48 gap-2">
          <div class="flex flex-col w-full">
            <label for="email" class="sr-only"> Email address </label>

            <input
              type="email"
              id="email"
              required
              aria-label="Email address"
              autocomplete="email"
              class="block w-full h-20 px-4 py-2 font-mono text-3xl text-white border border-transparent appearance-none bg-base-800 rounded-3xl duration-300 placeholder-base-300 focus:bg-transparent focus:outline-none focus:ring-accent-500 focus:ring-offset-2 focus:ring-2 focus:ring-offset-base-500"
            />
          </div>

          <Button size="20" variant="accent" iconOnly class="shrink-0">
            <ArrowRight slot="icon" size="xl" />
          </Button>
        </form>
      </div>

      {
        sections.map((section) => (
          <div class="p-8 bg-base-100 rounded-4xl">
            <Text tag="h3" variant="textSM" class="font-mono  text-base-900">
              {section.title}
            </Text>
            <ul role="list" class="pl-8 ">
              {section.links.map((link) => (
                <li>
                  <Text
                    tag="a"
                    variant="textXS"
                    href={link.url}
                    class="text-xs text-base-600 hover:text-base-900 capitalize"
                  >
                    {link.name}
                  </Text>
                </li>
              ))}
            </ul>
          </div>
        ))
      }
      <div
        class="p-8 bg-base-900 rounded-4xl lg:col-start-3 flex flex-col items-center justify-center"
      >
        <Text tag="p" variant="textXL" class="font-mono text-white">
          <Logo />
        </Text>
      </div>
      <div
        class="p-8 bg-orange-500 rounded-4xl lg:col-start-5 lg:col-span-2 flex flex-col items-center justify-center"
      >
        <Text tag="p" variant="textSM" class="font-mono text-base-900">
          Â© Copyright Lexington Themes <span id="year"></span> and beyond.
        </Text>
      </div>
    </div>
  </Wrapper>
</footer>
<script type="module">
  document.getElementById("year").textContent = new Date().getFullYear();
</script>
